{
  "hash": "ad6bf736151cd441913aad674e1d1fb2",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Descriptivo\"\nformat: html\neditor: visual\n---\n\n## Running Code\n\nWhen you click the **Render** button a document will be generated that includes both content and the output of embedded code. You can embed code like this:\n\n### Introducción\n\nEsta sección presenta el **análisis descriptivo** de la red espacial de estaciones de\\\ngasolina en Bogotá, con énfasis en su relación con la movilidad urbana y la\\\ninfraestructura vial. El objetivo no es formular inferencias estadísticas ni\\\nmodelos predictivos, sino **describir la estructura de los datos**, la red\\\nconstruida y las métricas fundamentales utilizadas posteriormente en el análisis\\\nestructural y en la definición del Índice de Impacto Vehicular (IIV).\n\nLos resultados aquí mostrados sirven como **soporte técnico y reproducible**\\\ndel análisis presentado en el documento académico principal.\n\n## Datos y preparación\n\nEl conjunto de datos utilizado corresponde al archivo `resultados_movilidad_trafico.csv`, el cual integra información geográfica de las\\\nestaciones de servicio junto con variables derivadas del análisis de la red vial.\n\nCada fila representa una estación de gasolina en Bogotá, y las columnas incluyen\\\ninformación sobre su localización espacial, atributos viales y métricas de red\\\nnecesarias para el análisis de movilidad.\n\n\n\n### Selección de variables relevantes\n\nAunque el archivo original contiene información adicional, en este análisis se\\\ntrabaja exclusivamente con las variables que están **alineadas con el enfoque\\\nteórico del estudio** y con el documento principal. En particular, se excluyen\\\nvariables comerciales o de calificación que no forman parte del análisis de\\\nmovilidad urbana.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngas <- gas %>%\n  select(\n    place_id, nombre, lat, lon,\n    nearest_node, betweenness_vial,\n    tipo_via, distancia_via, peso_tipo_via,\n    IIV, dist_norm, bet_norm, peso_norm\n  )\n```\n:::\n\n\nLas variables seleccionadas pueden agruparse de la siguiente manera:\n\n-   **Identificación y localización:** `place_id`, `nombre`, `lat`, `lon`.\n\n-   **Información vial:** `tipo_via`, `distancia_via`, `peso_tipo_via`.\n\n-   **Métricas estructurales:** `betweenness_vial`.\n\n-   **Índice compuesto de movilidad:** `IIV` y sus componentes normalizados.\n\n## Exploración descriptiva inicial\n\nA continuación se presenta una vista preliminar de los datos, con algunas\\\nvariables clave relacionadas con movilidad y estructura vial.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngas %>%\n  select(nombre, tipo_via, distancia_via, betweenness_vial, IIV) %>%\n  slice_head(n = 5) %>%\n  kable(\n    caption = \"Primeras cinco estaciones y variables clave de movilidad\"\n  )\n```\n\n::: {.cell-output-display}\n\n\nTable: Primeras cinco estaciones y variables clave de movilidad\n\n|nombre                       |tipo_via | distancia_via| betweenness_vial|       IIV|\n|:----------------------------|:--------|-------------:|----------------:|---------:|\n|Mariana Terpel               |trunk    |      45.38454|        0.0000000| 0.3086236|\n|Combuscol Texaco La Floresta |primary  |      23.68282|        0.0280381| 0.3444841|\n|EDS Terpel La Juana          |primary  |      17.82417|        0.0022410| 0.2315022|\n|Terpel Gazel Villa Alsacia   |trunk    |      27.66403|        0.0121149| 0.3693821|\n|Terpel Las Palmas            |primary  |      10.20440|        0.0327107| 0.3853565|\n\n\n:::\n:::\n\n\nEsta tabla permite observar cómo las estaciones difieren en su proximidad a vías\\\nprincipales, en la jerarquía vial asociada y en su impacto vehicular estimado.\n\n## Construcción de la red de proximidad\n\nLa red espacial se construye a partir de un modelo de **\\$k\\$ vecinos más cercanos\\\n(k-NN)**, donde cada estación se conecta con sus estaciones geográficamente más\\\npróximas. Este enfoque captura relaciones locales de proximidad sin imponer\\\nconexiones arbitrarias a larga distancia.\n\nEn esta etapa se asume que la relación de vecindad ya ha sido calculada\\\npreviamente y almacenada en el conjunto de datos a través de la variable\\\n`nearest_node`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readr)\nlibrary(igraph)\n\ngas <- read_csv(\"resultados_movilidad_trafico.csv\", show_col_types = FALSE)\n\ncoords <- as.matrix(gas[, c(\"lat\", \"lon\")])\nk <- 6\nn <- nrow(coords)\n\nedge_list <- matrix(NA, n * k, 2)\nrow <- 1\n\nfor (i in 1:n) {\n  dists <- sqrt((coords[,1] - coords[i,1])^2 + (coords[,2] - coords[i,2])^2)\n  nn <- order(dists)[2:(k+1)]\n  for (j in nn) {\n    edge_list[row, ] <- c(i, j)\n    row <- row + 1\n  }\n}\n\nedges <- as.data.frame(edge_list)\ncolnames(edges) <- c(\"from\", \"to\")\n\ng <- graph_from_data_frame(edges, directed = FALSE)\n\nx <- (gas$lon - min(gas$lon)) / (max(gas$lon) - min(gas$lon))\ny <- (gas$lat - min(gas$lat)) / (max(gas$lat) - min(gas$lat))\nlayout_geo <- cbind(x, y)\n\nplot(\n  g,\n  layout = layout_geo,\n  vertex.size = 6,\n  vertex.color = \"tomato\",\n  vertex.label = NA,\n  edge.color = \"gray70\",\n  edge.width = 0.8,\n  main = \"Red espacial de estaciones de gasolina en Bogotá (k = 6)\"\n)\n```\n\n::: {.cell-output-display}\n![](Descriptivo_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\nEl grafo resultante es no dirigido y representa la estructura espacial básica del sistema de estaciones dentro del tejido urbano de la ciudad.\n\n## Características generales de la red\n\nAntes de analizar métricas más específicas, se describen algunas propiedades globales del grafo que permiten caracterizar su estructura general. En particular, se examinan el número de nodos y aristas, la conectividad global y el grado medio, con el fin de verificar que el sistema se comporta como una red espacial urbana integrada.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Número de nodos y aristas\nnum_nodos <- vcount(g)\nnum_aristas <- ecount(g)\n\n# Grado medio\ngrado_medio <- mean(degree(g))\n\n# Componentes conexas\nnum_componentes <- components(g)$no\n\n# Mostrar resultados\ndata.frame(\n  Nodos = num_nodos,\n  Aristas = num_aristas,\n  Grado_medio = round(grado_medio, 2),\n  Componentes_conexas = num_componentes\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  Nodos Aristas Grado_medio Componentes_conexas\n1    60     360          12                   1\n```\n\n\n:::\n:::\n\n\nEstas características permiten verificar el tamaño de la red y su conectividad,\\\nconfirmando que el sistema se comporta como una red espacial urbana integrada.\n\n## Métricas estructurales de la red\n\nPara caracterizar el rol estructural de cada estación dentro de la red se\\\ncalculan métricas clásicas de teoría de grafos.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nV(g)$degree <- degree(g)\nV(g)$closeness <- closeness(g, normalized = TRUE)\nV(g)$betweenness <- betweenness(g, normalized = TRUE)\n```\n:::\n\n\n### Grado\n\nEl grado de un nodo representa el número de estaciones vecinas directamente\\\nconectadas.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(V(g)$degree)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n      7      11      12      12      13      15 \n```\n\n\n:::\n:::\n\n\nValores elevados de grado indican estaciones ubicadas en zonas con alta densidad espacial de estaciones, generalmente asociadas a corredores urbanos importantes.\n\n### Intermediación (betweenness)\n\nLa centralidad de intermediación identifica estaciones que actúan como puentes\\\nen los caminos más cortos de la red.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(V(g)$betweenness)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. \n0.0007259 0.0166033 0.0345644 0.0423437 0.0559195 0.1453119 \n```\n\n\n:::\n:::\n\n\n## Índice de Impacto Vehicular (IIV)\n\nEl Índice de Impacto Vehicular (IIV) sintetiza información sobre la proximidad a\\\nvías principales, la jerarquía vial y la relevancia estructural dentro de la red.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(gas$IIV)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. \n0.0004926 0.1439710 0.2495833 0.2427713 0.3406042 0.4985185 \n```\n\n\n:::\n:::\n\n\nDistribución del IIV\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(gas, aes(IIV)) +\n  geom_histogram(bins = 15) +\n  labs(\n    title = \"Distribución del Índice de Impacto Vehicular (IIV)\",\n    x = \"IIV\",\n    y = \"Frecuencia\"\n  )\n```\n\n::: {.cell-output-display}\n![](Descriptivo_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\nLa distribución del IIV muestra una diferenciación clara entre estaciones con bajo impacto vehicular, típicamente asociadas a vías secundarias o terciarias, y aquellas con mayor influencia potencial sobre el tráfico urbano.\n\n## Relación entre estructura vial e impacto vehicular\n\nUna de las preguntas centrales del análisis es cómo se relaciona la estructura\\\nde la red vial con el impacto vehicular estimado.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(gas, aes(betweenness_vial, IIV)) +\n  geom_point() +\n  geom_smooth(method = \"lm\", se = FALSE) +\n  labs(\n    title = \"Relación entre intermediación vial e IIV\",\n    x = \"Intermediación vial\",\n    y = \"Índice de Impacto Vehicular\"\n  )\n```\n\n::: {.cell-output-display}\n![](Descriptivo_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncor(gas$betweenness_vial, gas$IIV, use = \"complete.obs\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.6176694\n```\n\n\n:::\n:::\n\n\nEsta relación sugiere que estaciones ubicadas en nodos viales estructuralmente\\\nrelevantes tienden a presentar mayores valores de impacto vehicular, reforzando\\\nla coherencia entre el índice propuesto y la estructura de la red.\n\n## Estaciones con mayor impacto vehicular\n\nFinalmente, se identifican las estaciones con mayores valores del IIV.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngas %>%\n  arrange(desc(IIV)) %>%\n  select(nombre, tipo_via, distancia_via, betweenness_vial, IIV) %>%\n  slice_head(n = 10) %>%\n  kable(\n    caption = \"Estaciones con mayor Índice de Impacto Vehicular\"\n  )\n```\n\n::: {.cell-output-display}\n\n\nTable: Estaciones con mayor Índice de Impacto Vehicular\n\n|nombre                                |tipo_via  | distancia_via| betweenness_vial|       IIV|\n|:-------------------------------------|:---------|-------------:|----------------:|---------:|\n|Service station Terpel Pontevedra     |trunk     |     20.554313|        0.0393344| 0.4985185|\n|Estación de Servicio Terpel Av Boyaca |trunk     |     21.230608|        0.0340794| 0.4739117|\n|REDH PRIMAX AV QUITO                  |trunk     |     12.969057|        0.0251879| 0.4438729|\n|Terpel Avenida Carrera 28             |secondary |      9.574834|        0.0655717| 0.4378257|\n|Estación de Servicio Biomax           |trunk     |     17.029803|        0.0212614| 0.4194596|\n|Texaco Antares                        |trunk     |     53.036525|        0.0210038| 0.4034977|\n|Calle 49 Terpel Service Station       |trunk     |     13.610019|        0.0164976| 0.4028574|\n|Petrobras Normandía                   |trunk     |      8.160167|        0.0109850| 0.3939252|\n|Terpel Las Palmas                     |primary   |     10.204397|        0.0327107| 0.3853565|\n|EDS Terpel Compostela y GAZEL         |trunk     |     35.999815|        0.0140607| 0.3751404|\n\n\n:::\n:::\n\n\nEstas estaciones pueden interpretarse como nodos sensibles dentro del sistema de movilidad urbana, ya que combinan alta accesibilidad vial con posiciones estructurales relevantes dentro de la red.\n\n## Cierre\n\nEl análisis descriptivo presentado en esta sección proporciona una base sólida\\\npara la interpretación estructural y urbana del sistema de estaciones de\\\nservicio en Bogotá. La combinación de información geográfica, atributos viales y\\\nmétricas de red permite una lectura integrada del impacto potencial de estas\\\ninfraestructuras sobre la movilidad urbana.\n\nEsta sección cumple un rol técnico y documental, asegurando la reproducibilidad\\\ndel análisis y la coherencia con el marco metodológico del estudio principal.\n",
    "supporting": [
      "Descriptivo_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}