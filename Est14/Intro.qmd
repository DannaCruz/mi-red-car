---
title: "Red de Barberias"
format: html
author: "Juan Pablo Casilimas Camargo"
listing:
  type: grid
  sort: none
  contents:
    - descriptivo.qmd
    - bayesiano.qmd
---




# Mi primera página

![](KvecinosCercanos.png)

Aquí presento mi red personal del curso.

- Cargué mis datos  
- Analicé grados y centralidades  
- Encontré comunidades  
- Hice visualizaciones  

## Construcción del grafo de proximidad


Los datos provienen de una base tipo Google Places/Yelp, exportada como `barberia_bogota.csv`.  
Cada fila representa una barbería con atributos como coordenadas, calificación y número de reseñas.

```{r}
library(readr)
library(dplyr)
library(geosphere)   # para calcular distancias haversine
library(FNN)         # para vecinos más cercanos
library(igraph)      # para construir el grafo

# Cargar datos
df <- read_csv("barberia_bogota.csv")

# Extraer coordenadas
coords <- df %>% select(lat, lon)

# Calcular vecinos más cercanos (k = 6)
nbrs <- get.knn(as.matrix(coords), k = 6)

# Construir grafo
G <- graph.empty(n = nrow(df), directed = FALSE)

for(i in 1:nrow(df)){
  vecinos <- nbrs$nn.index[i, ]
  distancias <- nbrs$nn.dist[i, ]
  
  for(j in seq_along(vecinos)){
    v <- vecinos[j]
    d <- distancias[j]
    if(i != v){
      G <- add_edges(G, c(i, v), attr = list(weight = d))
    }
  }
}

# Opcional: visualizar resumen del grafo
print(G)
```


